{
	"$schema": "https://github.com/Azure/data-api-builder/releases/latest/download/dab.draft.schema.json",
	"data-source": {
		"database-type": "mssql",
		"connection-string": "@env('AZURE_SQL_CONNECTION_STRING')",
		"options": {
			"set-session-context": false
		}
	},
	"runtime": {
		"rest": {
			"enabled": true,
			"path": "/rest"
		},
		"graphql": {
			"enabled": true,
			"path": "/graphql",
			"allow-introspection": true
		},
		"host": {
			"mode": "production",
			"cors": {
				"origins": ["http://localhost:5173"],
				"allow-credentials": true
			},
			"authentication": {
				"provider": "StaticWebApps"
			}
		},
		"cache": {
			"enabled": true
		},
		"telemetry": {
		},
		"pagination": {
			"default-page-size": 50
		}
	},
	"entities": {
		"User": {
			"source": "dbo.Users",
			"graphql": true,
			"permissions": [
				{
					"role": "anonymous",
					"actions": ["read"]
				},
				{
					"role": "authenticated",
					"actions": ["create", "read", "update", "delete"]
				}
			]
		},
		"Book": {
			"source": "dbo.Books",
			"graphql": true,
			"permissions": [
				{
					"role": "anonymous",
					"actions": ["read"]
				},
				{
					"role": "authenticated",
					"actions": ["create", "read", "update", "delete"]
				}
			]
		},
		"SavedBook": {
			"source": "dbo.SavedBooks",
			"graphql": true,
			"permissions": [
				{
					"role": "authenticated",
					"actions": ["create", "read", "update", "delete"]
				},
				{
					"role": "anonymous",
					"actions": ["read"]
				}
			]
		}
	}
}
